<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema"
             xmlns:camunda="http://camunda.org/schema/1.0/bpmn"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
             id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn">
  
  <process id="ProductPromotionWorkflow" isExecutable="true" name="Product Promotion Workflow">
    
    <!-- ====================== Lanes ====================== -->
    <laneSet>
      <lane id="Lane_DataAnalysis" name="Data &amp; Analysis"/>
      <lane id="Lane_Commercial" name="Commercial &amp; Purchasing"/>
      <lane id="Lane_Finance" name="Finance &amp; Accounting"/>
      <lane id="Lane_Marketing" name="Marketing"/>
      <lane id="Lane_IT" name="IT"/>
    </laneSet>

    <!-- Start Event -->
    <startEvent id="StartEvent_1" name="Start Promotion Process">
      <outgoing>Flow_01</outgoing>
    </startEvent>

    <!-- Step 1 – Data & Analysis -->
    <task id="Task_DataIdentification" name="Detect low-selling or expiring products&#10;(generate target list)" lane="Lane_DataAnalysis">
      <incoming>Flow_01</incoming>
      <outgoing>Flow_02</outgoing>
    </task>

    <!-- Step 2 – Commercial & Purchasing (two parallel tasks) -->
    <parallelGateway id="Gateway_Split" name="">
      <incoming>Flow_02</incoming>
      <outgoing>Flow_Proposal</outgoing>
      <outgoing>Flow_PrepareInStore</outgoing>
    </parallelGateway>

    <task id="Task_Proposal" name="Propose discount/promotion strategy" lane="Lane_Commercial">
      <incoming>Flow_Proposal</incoming>
      <outgoing>Flow_Join1</outgoing>
    </task>

    <task id="Task_PrepareInStore" name="Prepare in-store price updates (if approved)" lane="Lane_Commercial">
      <incoming>Flow_PrepareInStore</incoming>
      <outgoing>Flow_Join2</outgoing>
    </task>

    <parallelGateway id="Gateway_Join" name="">
      <incoming>Flow_Join1</incoming>
      <incoming>Flow_Join2</incoming>
      <outgoing>Flow_03</outgoing>
    </parallelGateway>

    <!-- Step 3 – Finance & Accounting -->
    <task id="Task_ProfitabilityStudy" name="Evaluate financial feasibility&#10;&amp; profitability" lane="Lane_Finance">
      <incoming>Flow_03</incoming>
      <outgoing>Flow_04</outgoing>
    </task>

    <!-- Decision Gateway -->
    <exclusiveGateway id="Gateway_Approval" name="Promotion approved?">
      <incoming>Flow_04</incoming>
      <outgoing>Flow_Yes</outgoing>
      <outgoing>Flow_No</outgoing>
    </exclusiveGateway>

    <!-- No path → Promotion refused -->
    <endEvent id="End_Refused" name="Promotion refused">
      <incoming>Flow_No</incoming>
      <terminateEventDefinition/>
    </endEvent>

    <!-- Yes path continues -->
    <!-- Step 4 – Marketing -->
    <task id="Task_MarketingComm" name="Prepare &amp; publish promotion&#10;(flyers, digital, in-store)" lane="Lane_Marketing">
      <incoming>Flow_Yes</incoming>
      <outgoing>Flow_05</outgoing>
    </task>

    <!-- Step 5 – IT -->
    <task id="Task_SystemUpdate" name="Update promotional prices in&#10;POS, ERP, e-commerce, inventory" lane="Lane_IT">
      <incoming>Flow_05</incoming>
      <outgoing>Flow_06</outgoing>
    </task>

    <!-- Step 6 – Commercial (physical update) -->
    <task id="Task_InStoreUpdate" name="Physically update price labels&#10;on shelves" lane="Lane_Commercial">
      <incoming>Flow_06</incoming>
      <outgoing>Flow_07</outgoing>
    </task>

    <!-- Successful end -->
    <endEvent id="End_Success" name="Promotion live">
      <incoming>Flow_07</incoming>
    </endEvent>

    <!-- Sequence Flows -->
    <sequenceFlow id="Flow_01" sourceRef="StartEvent_1" targetRef="Task_DataIdentification"/>
    <sequenceFlow id="Flow_02" sourceRef="Task_DataIdentification" targetRef="Gateway_Split"/>
    <sequenceFlow id="Flow_Proposal" sourceRef="Gateway_Split" targetRef="Task_Proposal"/>
    <sequenceFlow id="Flow_PrepareInStore" sourceRef="Gateway_Split" targetRef="Task_PrepareInStore"/>
    <sequenceFlow id="Flow_Join1" sourceRef="Task_Proposal" targetRef="Gateway_Join"/>
    <sequenceFlow id="Flow_Join2" sourceRef="Task_PrepareInStore" targetRef="Gateway_Join"/>
    <sequenceFlow id="Flow_03" sourceRef="Gateway_Join" targetRef="Task_ProfitabilityStudy"/>
    <sequenceFlow id="Flow_04" sourceRef="Task_ProfitabilityStudy" targetRef="Gateway_Approval"/>

    <sequenceFlow id="Flow_Yes" name="Yes" sourceRef="Gateway_Approval" targetRef="Task_MarketingComm"/>
    <sequenceFlow id="Flow_No"  name="No"  sourceRef="Gateway_Approval" targetRef="End_Refused"/>

    <sequenceFlow id="Flow_05" sourceRef="Task_MarketingComm" targetRef="Task_SystemUpdate"/>
    <sequenceFlow id="Flow_06" sourceRef="Task_SystemUpdate" targetRef="Task_InStoreUpdate"/>
    <sequenceFlow id="Flow_07" sourceRef="Task_InStoreUpdate" targetRef="End_Success"/>
  </process>

  <!-- Basic diagram layout (you can adjust coordinates as you like) -->
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="ProductPromotionWorkflow">
      <!-- (Layout omitted for brevity – most tools auto-layout when you import the XML) -->
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>